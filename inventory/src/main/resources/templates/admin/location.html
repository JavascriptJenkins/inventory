<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>New Location Data Entry</title>

    <script
            src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
            crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>


    <link rel="stylesheet" type="text/css" media="all" href="/css/table.css" th:href="@{/css/table.css}" />
    <!-- Bootstrap Font Icon CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <style>
        body {
            color: #fff;
            font-family: 'Roboto', sans-serif;
        }
        .table-hover tbody tr:hover {
            background-color: #e0f7fa;
        }
        .table-striped tbody tr:nth-of-type(odd) {
            background-color: #f1f8fa;
        }
        .table-dark thead {
            background-color: #343a40;
            color: #fff;
        }
        .btn-secondary, .btn-primary {
            color: #fff;
            background-color: #343a40;
            border-color: #343a40;
        }
        .btn-secondary:hover, .btn-primary:hover {
            background-color: #23272b;
            border-color: #1d2124;
        }
        .form-control, .form-select {
            background-color: #343a40;
            color: #fff;
            border: 1px solid #343a40;
        }
        .form-control:focus, .form-select:focus {
            background-color: #343a40;
            color: #fff;
            border-color: #1d2124;
            box-shadow: none;
        }
        .header-dark {
            background-color: #343a40;
            color: #fff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-family: 'Roboto', sans-serif;
            border: 1px solid transparent;
            border-image: linear-gradient(to right, #c0c0c0, #ffffff);
            border-image-slice: 1;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
        }
        .header-small {
            background-color: #343a40;
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-family: 'Roboto', sans-serif;
            border: 1px solid transparent;
            border-image: linear-gradient(to right, #c0c0c0, #ffffff);
            border-image-slice: 1;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: fit-content;
            max-width: 400px;
            margin: 0 auto 15px auto;
            text-align: center;
        }
        .back-button {
            margin-right: 20px;
            font-size: 2rem;
        }
        .back-button a {
            color: #343a40;
            background-color: #fff;
            padding: 10px;
            border-radius: 50%;
            border: 2px solid #343a40;
        }
        .back-button a:hover {
            background-color: #23272b;
            color: #fff;
            border-color: #23272b;
        }
        .alert {
            background-color: #343a40;
            color: #fff;
            border: 1px solid #343a40;
        }
        .alert-danger {
            background-color: #dc3545;
            border-color: #dc3545;
        }
        .alert-success {
            background-color: #28a745;
            border-color: #28a745;
        }
        .alert-primary {
            background-color: #007bff;
            border-color: #007bff;
        }
        .pagination .page-link {
            color: #fff;  /* Changed to white */
            background-color: #343a40;
            border: 1px solid #343a40;
        }
        .pagination .page-link:hover {
            background-color: #23272b;
            border-color: #1d2124;
        }
        .pagination .active .page-link {
            color: #fff;
            background-color: #007bff;
            border-color: #007bff;
        }
        .required:after {
            content: " *";
            color: red;
        }
        .form-label {
            color: #000;  /* Changed to black */
        }
    </style>
    <script>
    $(document).ready(function() {
        // Function to validate each field
        function validateField(field) {
            const fieldName = $(field).attr('name');
            const value = $(field).val();
            let message = '';

            switch (fieldName) {
                case 'name':
                    if (value.trim() === '') message = 'Location Name is required.';
                    break;
                case 'description':
                    if (value.length > 150) message = 'Description should be less than 150 characters.';
                    break;
                case 'address':
                    if (value.trim() === '') message = 'Address is required.';
                    break;
                case 'city':
                    if (value.trim() === '') message = 'City is required.';
                    break;
                case 'state':
                    if (value.trim() === '') message = 'State is required.';
                    break;
                case 'zipcode':
                    if (!/^\d{5}$/.test(value)) message = 'Zipcode must be 5 digits.';
                    break;
                default:
                    break;
            }

            $(field).siblings('.validation-message').remove();
            if (message) {
                $(field).after(`<span class="validation-message text-danger">${message}</span>`);
            }
    }

        // Attach keyup event to each input field
        $('input').on('keyup', function() {
                validateField(this);
            });
        });

    </script>


</head>
<body>



<div th:insert="fragments/adminnavbar.html :: adminnavbarfragment"> </div>


<div class="container">

    <div class="header-dark">
        <div class="back-button">
            <a th:href="@{/admin}"><i class="bi bi-arrow-left-circle"></i></a>
        </div>
        <div>
            <h1>Location</h1>
            <p>Create a new Location entry in the database.</p>
        </div>
    </div>







    <!-- if th-->

    <form th:action="@{/location/createNewLocation}" th:object="${location}" method="post">
        <div class="alert alert-danger" role="alert" th:if="${errorMessage}" th:text="${errorMessage}">Error</div>
        <div class="alert alert-success" role="alert" th:if="${successMessage}" th:text="${successMessage}">Success</div>


        <div class="row" style="margin-bottom: 5px;">
            <div class="col-md-4" style="margin-bottom: 5px;">
                <label class="form-label required">Location Name</label>
                <input type="text" th:field="*{name}" class="form-control" placeholder="name" aria-label="name">
            </div>
            <div class="col-md-4" style="margin-bottom: 5px;">
                <label class="form-label">Location Description</label>
                <input type="text" th:field="*{description}" class="form-control" placeholder="description" aria-label="description">
            </div>
            <div class="col-md-4" style="margin-bottom: 5px;">
                <label class="form-label required">Address</label>
                <input type="text" name="address" th:field="*{address1}" class="form-control" placeholder="address" aria-label="address">
            </div>
            <div class="col-md-4" style="margin-bottom: 5px;">
                <label class="form-label required">Address2</label>
                <input type="text" name="address2" th:field="*{address2}" class="form-control" placeholder="address2" aria-label="address2">
            </div>
            <div class="col-md-4" style="margin-bottom: 5px;">
                <label class="form-label required">City</label>
                <input type="text" name="city" th:field="*{city}" class="form-control" placeholder="city" aria-label="city">
            </div>
            <div class="col-md-4" style="margin-bottom: 5px;">
                <label class="form-label required">State</label>
                <input type="text" name="state" th:field="*{state}" class="form-control" placeholder="state" aria-label="state">
            </div>
            <div class="col-md-4" style="margin-bottom: 5px;">
                <label class="form-label required">Zipcode</label>
                <input type="text" name="zipcode" th:field="*{zipcode}" class="form-control" placeholder="zipcode" aria-label="zipcode">
            </div>
            <div class="col-md-4" style="margin-bottom: 5px;">
                <label class="form-label required">Location Type</label>
                <select class="form-control" th:field="${location.locationtype}"  id="locationtypeid" readonly="">
                    <!--                        <option value="">select operator</option>-->
                    <!--                        <option th:each="operator : ${}" th:value="${operator.id}" th:text="${operator.operatorName}"></option>-->
                    <option th:each="locationtype : ${locationtypes}" th:value="${locationtype.locationtypeid}" th:text="${locationtype.name}"></option>

                </select>
            </div>
        </div>

        <br>
        <br>

        <button style="margin-top:5px;" type="submit" class="btn btn-primary">Submit</button>
    </form>
    <div class="header-small">
        <p>Locations</p>
    </div>




    <br>
    <br>



    <!-- Show list of locations -->
        <table class="table table-hover table-striped table-dark">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Desc</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="location, iStat : ${locationPage.content}"
                    th:style="${iStat.odd}? 'font-weight: bold;'"
                    th:alt-title="${iStat.even}? 'even' : 'odd'">
                    <td th:text="${location.name}"></td>
                    <td th:text="${location.description}"></td>
                </tr>
            </tbody>
        </table>
        <div th:if="${locationPage.totalPages > 0}" class="pagination"
             th:each="pageNumber : ${pageNumbers}">
            <a th:href="@{/location?size=__${#lists.size(locationPage.content)}__&page=__${pageNumber}__}"
               th:text=${pageNumber}
               th:class="${pageNumber==locationPage.number + 1} ? active"></a>
        </div>




</div>









</body>
</html>
